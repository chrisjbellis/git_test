<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css.css"></link>
</head>
<body>
    Enter sketchpad resolution:
    <input id="resolution"></input>
    <button id="resSubmit">Create</button>

    <script>

        const gridContainer = document.createElement('div');
        const resolution = document.getElementById('resolution');
        const resSubmit = document.getElementById('resSubmit');

        gridContainer.id = 'gridContainer';

        document.body.appendChild(gridContainer);

        containerSize = 800;

        gridContainer.style.width = (containerSize + 'px');
        gridContainer.style.height = (containerSize + 'px');

        function colorChange(e){
                        e.target.style.backgroundColor = 'black';
                        let currentOpacity = parseFloat(e.target.style.opacity) || 0;
                        if (currentOpacity < 1){
                            e.target.style.opacity = (currentOpacity + 0.1).toString()
                        }
        }

        isMouseDown = false;

        function updateGrid(){
            let gridSize = resolution.value;
            let totalCells = gridSize * gridSize;

            gridContainer.innerHTML = '';

            for (i=0; i<=totalCells-1; i++){

                const gridDiv = document.createElement('div');

                gridDiv.className = 'gridDiv';
                gridDiv.id = 'gridDiv' + i;

                gridContainer.appendChild(gridDiv);

                gridDiv.style.height = ((containerSize / gridSize) + 'px');
                gridDiv.style.width = ((containerSize / gridSize) + 'px');

                gridDiv.addEventListener('mousedown', function(e){
                    isMouseDown = true;
                        colorChange(e);
                })

                gridDiv.addEventListener('mouseover', function(e) {
                    if (isMouseDown) {
                        colorChange(e);
                    }
                });

                gridDiv.addEventListener('mouseup', function() {
                    isMouseDown = false;
                });

            }
        }


        resSubmit.addEventListener('click', () => {
            updateGrid();
        });

        resolution.addEventListener('keydown', (e) => {
            if (e.key === 'Enter'){
                resSubmit.click();
            }
        })


    </script>
</body>
</html>